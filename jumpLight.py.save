import time
import datetime
import board
import busio
import adafruit_msa301
import ledshim

i2c = busio.I2C(board.SCL, board.SDA)
msa = adafruit_msa301.MSA301(i2c)

ledshim.set_clear_on_exit()
ledshim.set_brightness(0.8)

def netAccFun(i2cName):
	x, y, z = msa.acceleration
	netAcc = x**2 + y**2 + z**2
	return netAcc

def lightShow(timeVal):
	timeVal *=ledshim.NUM_PIXELS
	r = 255
	g = 0
	b = 255

	for x in range(ledshim.NUM_PIXELS):
		if timeVal < 0:
			r, g, b = 0, 0, 0
		else:
			r, g, b = [int(min(timeVal, 1.0) * c) for c in [r, g, b]]
		ledshim.set_pixel(x, r, g, b)
		timeVal -= 1
	ledshim.show()


while True:
	if netAccFun(msa) < 40:
		print("jump start \n")
		jumpStart = datetime.datetime.
		while netAccFun(msa) < 40:
			time.sleep(0.01)

		print("jump end \n")
		jumpEnd = datetime.datetime.now()
		jumpDuration = (jumpEnd - jumpStart).total_seconds()
		print("%f " % jumpDuration)

		jumpDuration = min(jumpDuration, 1.0)
		lightShow(jumpDuration)
		time.sleep(0.5)
